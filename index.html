<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ìš°ë¦¬, í•˜íšŒí• ê¹Œ?</title>

<style>
  @font-face{font-family:"GungsuhLocal";src:local("ê¶ì„œ"),local("Gungsuh");}
  :root{
    --ink:#2c1e12;
    --bg:#f7f1e7;
    --panel:#fbf7f0;
    --line:#e6dccb;
    --ok:#c0a27f;
    --pill:#7c5b40;
    --pill-ink:#f6efe6;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:"GungsuhLocal","Gungsuh","Batang",serif;
    color:var(--ink);
    background:
      linear-gradient(rgba(255,255,255,.86),rgba(255,255,255,.86)),
      url("./assets/textures/hanji.jpg") center/cover fixed no-repeat;
  }
  .hero{text-align:center;max-width:980px;margin:24px auto 18px;padding:0 16px;}
  #siteTitle{margin:0;font-weight:900;color:#2f2216;font-size:clamp(28px,7vw,56px);line-height:1.15;text-shadow:0 1px 0 rgba(255,255,255,.45);}
  .subtitle{margin:.35rem 0 0;color:#5b4631;font-size:clamp(14px,3.4vw,22px);}
  .container{max-width:980px;margin:0 auto;padding:0 16px}
  .panel{background:var(--panel);border:1px solid var(--line);box-shadow:0 10px 22px rgba(0,0,0,.06);border-radius:16px;padding:20px;margin:14px 0;}
  .hidden{display:none}.center{text-align:center}.note{color:#7a6a58;font-size:14px}
  .btn{background:var(--pill);color:var(--pill-ink);border:none;border-radius:999px;padding:12px 18px;cursor:pointer;font-family:"GungsuhLocal","Gungsuh","Batang",serif;box-shadow:0 2px 0 rgba(0,0,0,.18) inset, 0 4px 10px rgba(0,0,0,.12);}
  .btn:disabled{opacity:.45;cursor:not-allowed}

  /* ìºë¦­í„° */
  .characters{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;}
  .card{background:#f6f0e2;border:1px solid #e7d9c0;border-radius:14px;padding:12px;text-align:center;overflow:hidden;display:flex;flex-direction:column;align-items:center;transition:.15s ease;cursor:pointer;}
  .card:hover{transform:translateY(-2px)}
  .card.selected{outline:3px solid #b67b32}
  .card img{display:block;margin:6px auto 10px;object-fit:contain;max-width:88%;max-height:clamp(140px,34vw,220px);}
  .card[data-char="yangban"] img{transform:scale(1.10);}
  .card .name{margin-top:8px;color:#3b2a1a;font-size:clamp(16px,3.8vw,20px)}
  @media (min-width:768px){.characters{grid-template-columns:repeat(4,minmax(0,1fr));gap:14px}.card img{max-height:210px;max-width:90%}}

  /* í€˜ìŠ¤íŠ¸ */
  .quests-row{display:flex;flex-direction:column;gap:10px}
  .qcard{display:flex;align-items:center;gap:10px;width:100%;padding:10px 12px;background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.05);cursor:pointer;transition:transform .15s;}
  .qcard:hover{transform:translateY(-2px);}
  .q-emoji{flex:0 0 28px;font-size:18px;text-align:center}
  .q-line{flex:1 1 auto;font-size:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#3d2a1c;}
  .q-badge{flex:0 0 auto;font-size:13px;padding:4px 8px;border:2px solid var(--ok);border-radius:12px;background:#fff7ef;color:#6a5140;}
  .q-badge.done{background:var(--ok);color:#fff}

  /* OX */
  .ox{display:flex;gap:10px;justify-content:center;margin:12px 0}
  .ox .btn{min-width:120px;font-size:22px}
  .ox .btn.active{background:#caa57b;color:#fff}

  /* ì¿ í° */
  .coupon-strip{display:flex;gap:16px;overflow-x:auto;-webkit-overflow-scrolling:touch;scroll-snap-type:x mandatory;padding:12px 10px;border-radius:16px;background:rgba(255,255,255,.7);border:1px solid #d6c6a8;}
  .coupon-item{flex:0 0 72vw;max-width:360px;text-align:center;scroll-snap-align:center;background:#fff;border:1px solid #e3d3b2;border-radius:14px;padding:10px;box-shadow:0 4px 10px rgba(0,0,0,.08);}
  .coupon-item img{width:100%;height:48vw;max-height:240px;object-fit:cover;border-radius:14px;border:3px solid #d8c49a;box-shadow:0 4px 10px rgba(0,0,0,.18);}
  .coupon-item figcaption{margin-top:8px;color:#4b2c20;font-size:18px}
  @media (min-width:768px){.coupon-item{flex:0 0 220px;max-width:220px}.coupon-item img{height:190px;max-height:190px}}
</style>
</head>

<body>
  <header class="hero">
    <h1 id="siteTitle">ìš°ë¦¬, í•˜íšŒí• ê¹Œ?</h1>
    <p class="subtitle">ì „í†µÂ·í™˜ê²½Â·ì°¸ì—¬ì˜ ìƒˆë¡œìš´ ê³µì¡´, í•˜íšŒ ìˆ˜í˜¸ë‹¨ RPG</p>
  </header>

  <main class="container">
    <section id="story" class="panel">
      <h2>ìŠ¤í† ë¦¬ë¼ì¸</h2>
      <p>ì˜›ë‚  í•˜íšŒì˜ ìˆ˜í˜¸ì‹  <b>ë†ê²½ì‹ (í† ì§€ì‹ )</b>ì€ í’ìš”ì™€ ìƒëª…ì„ ê´€ì¥í–ˆìœ¼ë‚˜, ë¬´ë¶„ë³„í•œ ì“°ë ˆê¸°ì™€ ì˜¤ì—¼ìœ¼ë¡œ <b>ë‚™ë™ê°•</b>ì´ ë³‘ë“¤ì ë¶„ë…¸í–ˆìŠµë‹ˆë‹¤.<br>
      ë‹¹ì‹ ì€ <b>í•˜íšŒ ìˆ˜í˜¸ë‹¨</b>ì´ ë˜ì–´ í™˜ê²½ ì •í™”ì™€ ì „í†µ ë³µì› í€˜ìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³ , í©ì–´ì§„ <b>íƒˆ ì¡°ê°</b>ì„ ì°¾ì•„ í•˜íšŒì˜ í’ìš”ë¥¼ ë˜ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.</p>
      <div class="center" style="margin-top:10px"><button id="btnStart" class="btn">ì‹œì‘í•˜ê¸°</button></div>
      <p class="note center">* ì‹œì‘í•˜ê¸°ë¥¼ ëˆŒëŸ¬ì•¼ ìºë¦­í„° ì„ íƒìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
    </section>

    <section id="characters" class="panel hidden">
      <h2>í•˜íšŒ ìˆ˜í˜¸ë‹¨ ì„ íƒ</h2>
      <div class="characters">
        <div class="card" data-char="yangban"><img src="./yangban.png" alt="ì–‘ë°˜"><div class="name">ì–‘ë°˜</div></div>
        <div class="card" data-char="yeon"><img src="./yeon.png" alt="ì—°ì´ë‚­ì"><div class="name">ì—°ì´ë‚­ì</div></div>
        <div class="card" data-char="ttogi"><img src="./ttogi.png" alt="ë˜ê¸°"><div class="name">ë˜ê¸°</div></div>
        <div class="card" data-char="eojin"><img src="./eojin.png" alt="ì–´ì§„í• ë°°"><div class="name">ì–´ì§„í• ë°°</div></div>
      </div>
      <div class="center" style="margin-top:10px"><button id="btnCharNext" class="btn" disabled>ì„ íƒí•˜ê³  ë‹¤ìŒ</button></div>
    </section>

    <section id="quests" class="panel hidden">
      <h2>í€˜ìŠ¤íŠ¸ ì„ íƒ</h2>
      <p id="qProgress" class="note">ì§„í–‰ í˜„í™©: 0/5 ì™„ë£Œ</p>
      <div class="quests-row">
        <button class="qcard" data-go="q-recycle" data-key="recycle"><span class="q-emoji">â™»ï¸</span><span class="q-line">ë¶„ë¦¬ìˆ˜ê±° Â· ìŠ¤ë§ˆíŠ¸ ë¶„ë¦¬ìˆ˜ê±°ì¡´ ì¸ì¦</span><span class="q-badge" id="badge-recycle">ëŒ€ê¸°</span></button>
        <button class="qcard" data-go="q-photo" data-key="photo"><span class="q-emoji">ğŸ“¸</span><span class="q-line">í¬í† ì¡´ Â· ì •í™” í›„ ì¸ì¦ìƒ·</span><span class="q-badge" id="badge-photo">ëŒ€ê¸°</span></button>
        <button class="qcard" data-go="q-ox" data-key="ox"><span class="q-emoji">ğŸŒ²</span><span class="q-line">ë§Œì†¡ì • OÂ·X Â· ë²„íŠ¼ í€´ì¦ˆ</span><span class="q-badge" id="badge-ox">ëŒ€ê¸°</span></button>
        <button class="qcard" data-go="q-keyring" data-key="keyring"><span class="q-emoji">ğŸ§µ</span><span class="q-line">ì—…ì‚¬ì´í´ë§ í‚¤ë§ Â· ì œì‘ ì¸ì¦</span><span class="q-badge" id="badge-keyring">ëŒ€ê¸°</span></button>
        <button class="qcard" data-go="q-happy" data-key="happy"><span class="q-emoji">ğŸ˜Š</span><span class="q-line">ë‚˜ì˜ í–‰ë³µ ì‚¬ì§„ Â· ìˆœê°„ ê³µìœ </span><span class="q-badge" id="badge-happy">ëŒ€ê¸°</span></button>
      </div>
    </section>

    <section id="q-recycle" class="panel hidden">
      <h2>ë¶„ë¦¬ìˆ˜ê±° ì¸ì¦</h2>
      <p>ìŠ¤ë§ˆíŠ¸ ë¶„ë¦¬ìˆ˜ê±°ì¡´ì—ì„œ ì´¬ì˜í•˜ê±°ë‚˜, í˜„ì¥ ì¸ì¦ ì‚¬ì§„ì„ ì˜¬ë ¤ì£¼ì„¸ìš”.</p>
      <input id="recycleInput" type="file" accept="image/*" capture="environment">
      <div class="center"><button class="btn" data-back>â† ëª©ë¡ìœ¼ë¡œ</button><button class="btn" id="btnRecycleDone" data-done="recycle" disabled>ì™„ë£Œ</button></div>
    </section>

    <section id="q-photo" class="panel hidden">
      <h2>í¬í† ì¡´ ì¸ì¦</h2>
      <p>ì •í™”ëœ ì§€ì—­ì˜ â€˜í›„â€™ ì‚¬ì§„ì„ ì˜¬ë ¤ì£¼ì„¸ìš”.</p>
      <input id="photoInput" type="file" accept="image/*" capture="environment">
      <div class="center"><button class="btn" data-back>â† ëª©ë¡ìœ¼ë¡œ</button><button class="btn" id="btnPhotoDone" data-done="photo" disabled>ì™„ë£Œ</button></div>
    </section>

    <section id="q-ox" class="panel hidden">
      <h2>ë§Œì†¡ì • OÂ·X í€´ì¦ˆ</h2>
      <p>â€œë§Œì†¡ì •ì˜ ì†Œë‚˜ë¬´ ë¿Œë¦¬ëŠ” ëª¨ë˜ ì§€í˜•ì„ ê³ ì •í•´ ìƒíƒœê³„ë¥¼ ì§€í‚¤ëŠ” ë° ë„ì›€ì´ ëœë‹¤.â€</p>
      <div class="ox center"><button class="btn" data-ox="O">O</button><button class="btn" data-ox="X">X</button></div>
      <p id="oxResult" class="center note"></p>
      <div class="center"><button class="btn" data-back>â† ëª©ë¡ìœ¼ë¡œ</button><button class="btn" id="btnOxDone" data-done="ox" disabled>ì™„ë£Œ</button></div>
    </section>

    <section id="q-keyring" class="panel hidden">
      <h2>ì—…ì‚¬ì´í´ë§ í‚¤ë§</h2>
      <p>ì œì‘í•œ í‚¤ë§ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.</p>
      <input id="keyringInput" type="file" accept="image/*">
      <div class="center"><button class="btn" data-back>â† ëª©ë¡ìœ¼ë¡œ</button><button class="btn" id="btnKeyDone" data-done="keyring" disabled>ì™„ë£Œ</button></div>
    </section>

    <section id="q-happy" class="panel hidden">
      <h2>ë‚˜ì˜ í–‰ë³µ ì‚¬ì§„</h2>
      <p>í•˜íšŒì—ì„œ ê°€ì¥ í–‰ë³µí–ˆë˜ ìˆœê°„ì„ ì˜¬ë ¤ì£¼ì„¸ìš”.</p>
      <input id="happyInput" type="file" accept="image/*">
      <div class="center"><button class="btn" data-back>â† ëª©ë¡ìœ¼ë¡œ</button><button class="btn" id="btnHappyDone" data-done="happy" disabled>ì™„ë£Œ</button></div>
    </section>

    <section id="coupons" class="panel hidden">
      <div class="center"><h2 style="font-size:36px;color:#3b2a1a;margin:0;">ğŸ ì¿ í° ë³´ìƒ</h2><p style="color:#5b4631;font-size:17px;margin-top:4px;">í•˜íšŒ ìˆ˜í˜¸ë‹¨ì˜ í€˜ìŠ¤íŠ¸ë¥¼ ëª¨ë‘ ì™„ìˆ˜í•œ ë‹¹ì‹ ê»˜ ë“œë¦½ë‹ˆë‹¤ ğŸŒ¿</p></div>
      <div class="coupon-strip">
        <figure class="coupon-item"><img src="./assets/coupons/moodlight.png" alt="ë¬´ë“œë“±"><figcaption>í•˜íšŒ ê°•ë³€ ë¬´ë“œë“±</figcaption></figure>
        <figure class="coupon-item"><img src="./assets/coupons/tal-keyring.png" alt="íƒˆ í‚¤ë§"><figcaption>íƒˆ í‚¤ë§</figcaption></figure>
        <figure class="coupon-item"><img src="./assets/coupons/hanji-diary.png" alt="í•œì§€ ë‹¤ì´ì–´ë¦¬"><figcaption>í•œì§€ ë‹¤ì´ì–´ë¦¬</figcaption></figure>
      </div>
      <div class="center" style="margin-top:20px;"><p style="font-size:20px;color:#4b2c20;line-height:1.7;">ğŸ‰ <strong>êµ¿ì¦ˆ 10% í• ì¸ Â· ì¹´í˜ 10% í• ì¸ í˜œíƒ</strong><br><em>ì´ í™”ë©´ì„ í˜„ì¥ ì§ì›ì—ê²Œ ë³´ì—¬ì£¼ì„¸ìš”.</em></p></div>
      <div class="center"><button class="btn" id="btnBackHome">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div>
    </section>
  </main>

  <script>
  document.addEventListener('DOMContentLoaded',()=>{
    const $=s=>document.querySelector(s),$$=s=>document.querySelectorAll(s);
    const KEYS=['recycle','photo','ox','keyring','happy'];
    let progress=JSON.parse(localStorage.getItem('hahoe-progress')||'{}');
    KEYS.forEach(k=>{if(typeof progress[k]!=='boolean')progress[k]=false});
    function save(){localStorage.setItem('hahoe-progress',JSON.stringify(progress));}
    function showPanel(id){$$('.panel').forEach(p=>p.classList.add('hidden'));$('#'+id)?.classList.remove('hidden');window.scrollTo({top:0,behavior:'smooth'});}
    function updateUI(){
      const done=KEYS.filter(k=>progress[k]).length;
      const prog=$('#qProgress');if(prog)prog.textContent=`ì§„í–‰ í˜„í™©: ${done}/5 ì™„ë£Œ`;
      KEYS.forEach(k=>{const b=document.getElementById('badge-'+k);if(!b)return;if(progress[k]){b.textContent='ì™„ë£Œ';b.classList.add('done');}else{b.textContent='ëŒ€ê¸°';b.classList.remove('done');}});
      if(done===5)showPanel('coupons');
    }
    $('#btnStart')?.addEventListener('click',()=>showPanel('characters'));
    let selectedChar=null;$$('#characters .card').forEach(c=>c.addEventListener('click',()=>{$$('#characters .card').forEach(x=>x.classList.remove('selected'));c.classList.add('selected');selectedChar=c.dataset.char;$('#btnCharNext').disabled=false;}));
    $('#btnCharNext')?.addEventListener('click',()=>{if(!selectedChar)return;showPanel('quests');updateUI();});
    $$('#quests .qcard').forEach(card=>card.addEventListener('click',()=>{const t=card.getAttribute('data-go');if(t)showPanel(t);}));
    $$('[data-back]').forEach(b=>b.addEventListener('click',()=>showPanel('quests')));
    [['#recycleInput','#btnRecycleDone','recycle'],['#photoInput','#btnPhotoDone','photo'],['#keyringInput','#btnKeyDone','keyring'],['#happyInput','#btnHappyDone','happy']].forEach(([i,b,k])=>{const I=$(i),B=$(b);if(!I||!B)return;I.addEventListener('change',()=>{B.disabled=!(I.files&&I.files.length>0)});B.addEventListener('click',()=>{progress[k]=true;save();updateUI();showPanel('quests');});});
    let oxChoice=null;$$('#q
